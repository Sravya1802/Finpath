<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tax & Deadlines - FinPath</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container" style="max-width: 1000px; padding: 20px;">
        <!-- Header -->
        <div style="background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); padding: 20px; border-radius: 12px; margin-bottom: 25px;">
            <h1 style="color: #FF9800; margin: 0; font-size: 1.8em;">ğŸ“… Tax & Deadlines</h1>
            <p style="color: var(--text-medium); margin: 5px 0 0 0;">Important deadlines and tax information</p>
        </div>

        <!-- Deadlines Section -->
        <div class="card" style="border: 2px solid var(--border-color); border-radius: 12px; padding: 20px; background-color: var(--white); margin-bottom: 25px;">
            <h2 style="color: #9C27B0; margin: 0 0 15px 0; font-size: 1.4em;">ğŸ“‹ Upcoming Deadlines</h2>
            <div id="deadlines-list"></div>
        </div>

        <!-- Tax Information -->
        <div class="card" style="border: 2px solid var(--border-color); border-radius: 12px; padding: 20px; background-color: var(--white); margin-bottom: 25px;">
            <h2 style="color: #FF9800; margin: 0 0 15px 0; font-size: 1.4em;">ğŸ“„ Tax Filing Information</h2>
            <div id="tax-info"></div>
        </div>

        <!-- Navigation -->
        <div class="nav-buttons" style="margin-top: 20px; text-align: center;">
            <a href="dashboard.html" class="btn" style="padding: 10px 20px; font-size: 0.9em;">â† Back to Dashboard</a>
        </div>
    </div>

    <script>
        function getSelectedVisa() {
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            return userData?.visaType || localStorage.getItem('selectedVisa') || 'F-1';
        }

        const deadlines = {
            'F-1': [
                { title: 'Tax Filing Deadline', date: 'April 15, 2025', description: 'File Form 1040NR if you have U.S. income', icon: 'ğŸ“…' },
                { title: 'OPT Application Window', date: '90 days before program end', description: 'Apply for Optional Practical Training', icon: 'ğŸ“' },
                { title: 'I-20 Renewal', date: 'Before expiration', description: 'Renew your I-20 if needed', icon: 'ğŸ”„' },
                { title: 'Credit Report Check', date: 'Annually', description: 'Review your credit report at annualcreditreport.com', icon: 'ğŸ“Š' }
            ],
            'H-1B': [
                { title: 'Tax Filing Deadline', date: 'April 15, 2025', description: 'File Form 1040', icon: 'ğŸ“…' },
                { title: 'H-1B Extension', date: 'Before expiration', description: 'File extension if needed', icon: 'ğŸ”„' },
                { title: '401(k) Contribution Deadline', date: 'December 31, 2024', description: 'Maximize contributions before year end', icon: 'ğŸ’°' },
                { title: 'Credit Report Check', date: 'Annually', description: 'Review your credit report', icon: 'ğŸ“Š' }
            ],
            'Refugee': [
                { title: 'Tax Filing Deadline', date: 'April 15, 2025', description: 'File Form 1040', icon: 'ğŸ“…' },
                { title: 'SSN Application', date: 'As soon as possible', description: 'Apply for Social Security Number', icon: 'ğŸ†”' },
                { title: 'Resettlement Benefits', date: 'Within 8 months', description: 'Apply for available benefits', icon: 'ğŸ¤' },
                { title: 'Credit Report Check', date: 'Annually', description: 'Review your credit report', icon: 'ğŸ“Š' }
            ]
        };

        const taxInfo = {
            'F-1': {
                form: 'Form 1040NR (Non-Resident Alien)',
                deadline: 'April 15th',
                requirements: ['File if you have U.S. income', 'Use Form 8843 if no income', 'May be eligible for tax treaty benefits'],
                tips: ['Use free VITA programs if eligible', 'Keep all W-2 and 1099 forms', 'Consider tax software like Sprintax for non-residents']
            },
            'H-1B': {
                form: 'Form 1040 (Resident Alien)',
                deadline: 'April 15th',
                requirements: ['File as resident if you meet substantial presence test', 'Include all W-2 and 1099 forms', 'May be eligible for standard deduction'],
                tips: ['Consider itemizing if you have significant deductions', 'Maximize 401(k) contributions before year end', 'Keep records of all tax documents']
            },
            'Refugee': {
                form: 'Form 1040',
                deadline: 'April 15th',
                requirements: ['File if you have income', 'May be eligible for tax credits', 'Include all income sources'],
                tips: ['Use free VITA programs', 'You may be eligible for Earned Income Tax Credit', 'Keep all employment documents']
            }
        };

        function loadDeadlines() {
            const visaType = getSelectedVisa();
            const visaDeadlines = deadlines[visaType] || deadlines['F-1'];
            const container = document.getElementById('deadlines-list');
            
            container.innerHTML = '';
            visaDeadlines.forEach(function(deadline) {
                const deadlineBox = document.createElement('div');
                deadlineBox.style.cssText = 'padding: 18px; margin-bottom: 15px; background-color: var(--white); border: 2px solid var(--border-color); border-radius: 10px; box-shadow: 0 2px 8px var(--shadow); transition: all 0.2s ease;';
                
                deadlineBox.innerHTML = 
                    '<div style="display: flex; align-items: start; gap: 12px; margin-bottom: 10px;">' +
                        '<span style="font-size: 2em; line-height: 1;">' + deadline.icon + '</span>' +
                        '<div style="flex: 1;">' +
                            '<h4 style="color: var(--text-dark); margin: 0 0 8px 0; font-size: 1.1em; font-weight: 700;">' + deadline.title + '</h4>' +
                            '<div style="padding: 8px 12px; background-color: var(--primary-blue); border-radius: 6px; display: inline-block; margin-bottom: 10px;">' +
                                '<p style="font-weight: 600; color: var(--accent-blue); margin: 0; font-size: 0.95em;">ğŸ“… ' + deadline.date + '</p>' +
                            '</div>' +
                            '<p style="color: var(--text-medium); font-size: 0.9em; margin: 0; line-height: 1.5;">' + deadline.description + '</p>' +
                        '</div>' +
                    '</div>';
                
                container.appendChild(deadlineBox);
            });
        }

        function loadTaxInfo() {
            const visaType = getSelectedVisa();
            const info = taxInfo[visaType] || taxInfo['F-1'];
            const container = document.getElementById('tax-info');
            
            container.innerHTML = 
                '<div style="margin-bottom: 20px;">' +
                    '<h3 style="color: var(--text-dark); margin-bottom: 10px;">Tax Form: ' + info.form + '</h3>' +
                    '<p style="color: var(--text-medium); margin-bottom: 15px;">Deadline: <strong>' + info.deadline + '</strong></p>' +
                '</div>' +
                '<div style="margin-bottom: 20px; padding: 15px; background-color: var(--primary-blue); border-radius: 8px;">' +
                    '<h4 style="color: var(--accent-blue); margin-bottom: 10px;">Requirements:</h4>' +
                    '<ul style="margin-left: 20px; color: var(--text-dark);">' +
                        info.requirements.map(function(req) {
                            return '<li style="margin-bottom: 8px;">' + req + '</li>';
                        }).join('') +
                    '</ul>' +
                '</div>' +
                '<div style="padding: 15px; background-color: #E8F5E9; border-radius: 8px; border-left: 4px solid #4CAF50;">' +
                    '<h4 style="color: #2E7D32; margin-bottom: 10px;">Tips:</h4>' +
                    '<ul style="margin-left: 20px; color: var(--text-dark);">' +
                        info.tips.map(function(tip) {
                            return '<li style="margin-bottom: 8px;">' + tip + '</li>';
                        }).join('') +
                    '</ul>' +
                '</div>';
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadDeadlines();
            loadTaxInfo();
        });
    </script>
</body>
</html>

